!function(){"use strict";angular.module("neduTreeBrowser",["ngResource","ui.bootstrap"])}(),function(){"use strict";function e(e){var t={scope:{folders:"=",ntb:"="},restrict:"E",replace:"true",templateUrl:"app/components/tree/tree.html",require:"^ntbBrowser",compile:function(t){return e.compile(t)}};return t}e.$inject=["ntbRecursionHelper"],angular.module("neduTreeBrowser").directive("ntbTree",e)}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/components/list-items/list-items-table.html",scope:{contents:"=",ntb:"="}};return e}angular.module("neduTreeBrowser").directive("ntbListItemsTable",e)}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/components/list-items/list-items-list.html",scope:{contents:"=",ntb:"="}};return e}angular.module("neduTreeBrowser").directive("ntbListItemsList",e)}(),function(){"use strict";function e(){var e={restrict:"A",templateUrl:"app/components/list-item/list-item-table.html",scope:{item:"=ntbListItemTable",type:"=",ntb:"="}};return e}angular.module("neduTreeBrowser").directive("ntbListItemTable",e)}(),function(){"use strict";function e(){var e={restrict:"A",templateUrl:"app/components/list-item/list-item-list.html",scope:{item:"=ntbListItemList",type:"=",ntb:"="}};return e}angular.module("neduTreeBrowser").directive("ntbListItemList",e)}(),function(){"use strict";function e(){function e(){}var t={restrict:"E",templateUrl:"app/components/list/list.html",scope:{contents:"=",displayAs:"=",ntb:"="},controller:e};return t}angular.module("neduTreeBrowser").directive("ntbList",e)}(),function(){"use strict";function e(){function e(){}var t={restrict:"E",templateUrl:"app/components/browser/browser.html",scope:{ntb:"="},controller:e,controllerAs:"vm",bindToController:!0,replace:!0};return t}angular.module("neduTreeBrowser").directive("ntbBrowser",e)}(),function(){"use strict";function e(e){return{compile:function(t,n){angular.isFunction(n)&&(n={post:n});var i,o=t.contents().remove();return{pre:n&&n.pre?n.pre:null,post:function(t,r){i||(i=e(o)),i(t,function(e){r.append(e)}),n&&n.post&&n.post.apply(null,arguments)}}}}}e.$inject=["$compile"],angular.module("neduTreeBrowser").factory("ntbRecursionHelper",e)}(),function(){"use strict";function e(e,t,n,i){var o=function(o){var r=this;r.config={},angular.extend(r.config,e,o),r.currentFolder={id:null,parent:null,elements:{folders:[],items:[]}},r.browseTo=function(e){r.currentFolder.id=e;var o={};"undefined"!=typeof r.config.endpoints.folder.params&&(o=angular.extend(o,r.config.endpoints.folder.params)),o=angular.extend(o,{id:e}),t(r.config.endpoints.folder.url,o,{query:{isArray:!1}}).query().$promise.then(function(e){r.currentFolder.elements.folders=e.folders.sort(i.sortByKey("name",1)),r.currentFolder.elements.items=e.items.sort(i.sortByKey("name",1)),r.currentFolder.parent=e.parent_id},function(e){n.debug("Error loading folder",e)})},r.folderTree=[];var s=function(){if("undefined"!=typeof r.config.endpoints.tree){var e={};"undefined"!=typeof r.config.endpoints.tree.params&&(e=angular.extend(e,r.config.endpoints.tree.params)),t(r.config.endpoints.tree.url,e).query().$promise.then(function(e){r.folderTree=e,r.browseTo(e[0].id)},function(e){n.debug("Error loading folder tree",e)})}else r.folderTree=r.config.rawData.tree,r.config.rawData.tree.length&&r.config.rawData.tree[0].id&&r.browseTo(r.config.rawData.tree[0].id)};return s(),r};return o}e.$inject=["ntbConfig","$resource","$log","ListSort"],angular.module("neduTreeBrowser").factory("neduTreeBrowser",e)}(),angular.module("neduTreeBrowser").service("ListSortType",function(){return{SIMPLE_SORT:0,USER_FRIENDLY_SORT:1,STATUS_SORT:2,TAGS_SORT:3}}),angular.module("neduTreeBrowser").controller().service("ListSort",["ListSortType",function(e){return{sortRules:{breadcrumbs:e.USER_FRIENDLY_SORT,username:e.USER_FRIENDLY_SORT,name:e.USER_FRIENDLY_SORT,id:e.USER_FRIENDLY_SORT,created_by:e.USER_FRIENDLY_SORT,modified_by:e.USER_FRIENDLY_SORT,status:e.STATUS_SORT,tags:e.TAGS_SORT},statusesOrder:{},sortByKey:function(t,n){var i=this.sortRules[t]||e.SIMPLE_SORT;return i===e.SIMPLE_SORT?this.simpleSort(t,n):i===e.USER_FRIENDLY_SORT?this.userFriendlySort(t,n):i===e.STATUS_SORT?this.statusSort(t,n):i===e.TAGS_SORT?this.tagsSort(t,n):void 0},simpleSort:function(e,t){return function(n,i){var o=n[e],r=i[e];return o?r?o.localeCompare(r)*t:-t:t}},userFriendlySort:function(e,t){var n=new Intl.Collator(["en","pl"],{numeric:!0}).compare;return function(i,o){return n(i[e],o[e])*t}},statusSort:function(e,t){var n=this;return function(i,o){var r=i[e],s=o[e],l=n.statusesOrder[r]||0,c=n.statusesOrder[s]||0;return(l-c)*t}},tagsSort:function(e,t){return function(n,i){var o=n[e],r=i[e];return o&&o.length?r&&r.length?o.join(" ").localeCompare(r.join(" "))*t:-t:t}}}}]),function(){"use strict";function e(e,t){var n=this;n.endpoints=[{id:1,url1:"/fixtures/tree.json",url2:"/fixtures/:id.json",params:{}},{id:2,url1:"/fixtures/:param/tree.json",url2:"/fixtures/:param/:id.json",params:{param:"test"}}],n.selectedEndpoint=n.endpoints[0],n.changeEndpoints=function(){n.ntbConfig.endpoints={tree:{url:n.selectedEndpoint.url1,params:n.selectedEndpoint.params},folder:{url:n.selectedEndpoint.url2,params:n.selectedEndpoint.params}},n.ntbInstance=new t(n.ntbConfig)},n.displayTypes=[{id:1,name:"list"},{id:2,name:"table"}],n.selectedDisplayType=n.displayTypes[0],n.changeDisplayType=function(){n.ntbConfig.displayAs=n.selectedDisplayType.name,n.ntbInstance=new t(n.ntbConfig)},n.changeCheckbox=function(){n.ntbConfig.isCheckBoxList=n.selectedCheckBoxList,n.ntbInstance=new t(n.ntbConfig)},n.addColumn=function(){n.ntbConfig.columns.push({key:"",i18n:"",hasIcon:!1,hasLink:!1})},n.removeColumn=function(e){n.ntbConfig.columns.splice(e,1)},n.ntbConfig={endpoints:{tree:{url:"/fixtures/tree.json",params:{}},folder:{url:"/fixtures/:id.json",params:{}}},displayAs:"list",isCheckBoxList:!1,columns:[{key:"id",i18n:"Id"},{key:"name",i18n:"Name",hasIcon:!0,hasLink:!0}],selectionCallback:function(e){console.log(e.id,e.name,"has been selected")},selectionAllCallback:function(){console.log("Items have been selected")},i18n:{select_all:"Select all"},buttons:[{"class":"btn btn-primary btn-xs",icon:"glyphicon glyphicon-pencil",text:"Edit",action:function(){console.log("Edit clicked!")}},{"class":"btn btn-primary btn-xs",icon:"glyphicon glyphicon-eye-open",text:null,action:function(){console.log("Preview clicked!")}}]},n.ntbInstance=new t(n.ntbConfig)}e.$inject=["$scope","neduTreeBrowser"],angular.module("neduTreeBrowser").controller("MainController",e)}(),function(){"use strict";function e(){}angular.module("neduTreeBrowser").run(e)}(),function(){"use strict";angular.module("neduTreeBrowser").constant("ntbConfig",{endpoints:{tree:{url:null,params:{}},folder:{url:null,params:{}}},treeBrowseMethod:"click",displayAs:"table",sortTreeKey:"name",sortListKey:"name",isCheckBoxList:!1,columns:[{key:"id",i18n:"Id"},{key:"name",i18n:"Name",hasIcon:!0,hasLink:!0}],i18n:{select_all:""},selectionCallback:function(){},selectionAllCallback:function(){}})}(),function(){"use strict";function e(e){e.debugEnabled(!0)}e.$inject=["$logProvider"],angular.module("neduTreeBrowser").config(e)}(),angular.module("neduTreeBrowser").run(["$templateCache",function(e){e.put("app/components/browser/browser.html",'<div class="ntb-browser"><div class="ntb-folders-wrapper"><ntb-tree folders="vm.ntb.folderTree" ntb="vm.ntb"></ntb-tree></div><div class="ntb-list-wrapper"><ntb-list contents="vm.ntb.currentFolder" display-as="vm.ntb.config.displayAs" ntb="vm.ntb"></ntb-list></div></div>'),e.put("app/components/list/list.html",'<div class="ntb-list"><ntb-list-items-table ng-if="displayAs === \'table\'" contents="contents" ntb="ntb"></ntb-list-items-table><ntb-list-items-list ng-if="displayAs === \'list\'" contents="contents" ntb="ntb"></ntb-list-items-list></div>'),e.put("app/components/list-item/list-item-list.html",'<span ng-if="type === \'item\' && ntb.config.isCheckBoxList"><input type="checkbox" id="{{ item.id }}" class="list-group-checkbox"></span> <span ng-repeat="column in ntb.config.columns"><i class="glyphicon glyphicon-folder-close" ng-if="column.hasIcon && type === \'folder\'"></i> <i class="glyphicon glyphicon-file" ng-if="column.hasIcon && type === \'item\'"></i> {{ item[column.key] }}</span> <span ng-if="ntb.config.buttons && ntb.config.buttons.length && type === \'item\'" class="pull-right"><button ng-repeat="button in ntb.config.buttons" class="{{ button.class }}" ng-click="button.action($event, item)"><i ng-if="button.icon" class="{{ button.icon }}"></i> {{ button.text ? button.text : \'\'}}</button></span>'),e.put("app/components/list-item/list-item-table.html",'<td ng-repeat="column in ntb.config.columns"><a ng-if="type === \'folder\' && column.hasLink && ntb.config.treeBrowseMethod === \'ui.router\'" ui-sref=".folder({folder: item.id})"><i class="glyphicon glyphicon-folder-open" ng-if="column.hasIcon"></i> {{ item[column.key] }}</a> <a ng-if="type === \'folder\' && column.hasLink && ntb.config.treeBrowseMethod === \'click\'" ng-click="ntb.browseTo(item.id)"><i class="glyphicon glyphicon-folder-open" ng-if="column.hasIcon"></i> {{ item[column.key] }}</a> <a ng-if="type === \'item\' && column.hasLink" ng-click="ntb.config.selectionCallback(item)"><i class="glyphicon glyphicon-file" ng-if="column.hasIcon"></i> {{ item[column.key] }}</a> <span ng-if="type === \'folder\' && !column.hasLink"><i class="glyphicon glyphicon-folder-open" ng-if="column.hasIcon"></i> {{ item[column.key] }}</span> <span ng-if="type === \'item\' && !column.hasLink"><i class="glyphicon glyphicon-file" ng-if="column.hasIcon"></i> {{ item[column.key] }}</span></td><td ng-if="ntb.config.buttons && ntb.config.buttons.length"><button ng-if="type === \'item\'" ng-repeat="button in ntb.config.buttons" class="{{ button.class }}" ng-click="button.action($event, item)"><i ng-if="button.icon" class="{{ button.icon }}"></i> {{ button.text ? button.text : \'\' }}</button></td>'),e.put("app/components/list-items/list-items-list.html",'<div class="list-group-select-all"><span ng-if="ntb.config.isCheckBoxList && contents.elements.items.length !== 0"><input type="checkbox" class="select-all-checkbox" ng-click="ntb.config.selectionAllCallback()"> {{ ntb.config.i18n.select_all }}</span></div><div class="list-group"><a class="list-group-item" ng-if="contents.parent && ntb.config.treeBrowseMethod === \'ui.router\'" ui-sref=".folder({folder: contents.parent})">..</a> <a class="list-group-item" ng-if="contents.parent && ntb.config.treeBrowseMethod === \'click\'" ng-click="ntb.browseTo(contents.parent)">..</a> <a ng-repeat="item in contents.elements.folders | orderBy: ntb.config.sortListKey" ntb-list-item-list="item" type="\'folder\'" ntb="ntb" class="list-group-item" ng-if="ntb.config.treeBrowseMethod === \'ui.router\'" ui-sref=".folder({folder: item.id})"></a> <a ng-repeat="item in contents.elements.folders | orderBy: ntb.config.sortListKey" ntb-list-item-list="item" type="\'folder\'" ntb="ntb" class="list-group-item" ng-if="ntb.config.treeBrowseMethod === \'click\'" ng-click="ntb.browseTo(item.id)"></a> <a ng-repeat="item in contents.elements.items | orderBy: ntb.config.sortListKey" ntb-list-item-list="item" type="\'item\'" ntb="ntb" class="list-group-item" ng-click="ntb.config.selectionCallback(item)"></a></div>'),e.put("app/components/list-items/list-items-table.html",'<table class="table"><thead><tr><th ng-repeat="column in ntb.config.columns">{{ column.i18n }}</th><th ng-if="ntb.config.buttons && ntb.config.buttons.length"></th></tr></thead><tbody><tr ng-if="contents.parent"><td colspan="{{ ntb.config.columns.length }}"><a ng-if="ntb.config.treeBrowseMethod === \'ui.router\'" ui-sref=".folder({folder: contents.parent})">..</a> <a ng-if="ntb.config.treeBrowseMethod === \'click\'" ng-click="ntb.browseTo(contents.parent)">..</a></td><td ng-if="ntb.config.buttons && ntb.config.buttons.length"></td></tr><tr ng-repeat="item in contents.elements.folders | orderBy: \'name\'" ntb-list-item-table="item" type="\'folder\'" ntb="ntb"></tr><tr ng-repeat="item in contents.elements.items | orderBy: \'name\'" ntb-list-item-table="item" type="\'item\'" ntb="ntb"></tr></tbody></table>'),e.put("app/components/tree/tree.html",'<ul class="ntb-folder-list"><li ng-repeat="folder in folders | orderBy: ntb.config.sortTreeKey"><a ng-if="ntb.config.treeBrowseMethod === \'ui.router\'" ui-sref=".folder({folder: folder.id})" ui-sref-active="active"><i class="glyphicon glyphicon-folder-open"></i> {{ folder.name }}</a> <a ng-if="ntb.config.treeBrowseMethod === \'click\'" ng-click="ntb.browseTo(folder.id)"><i class="glyphicon glyphicon-folder-open"></i> {{ folder.name }}</a><ntb-tree ng-if="folder.folders.length" folders="folder.folders" ntb="ntb"></ntb-tree></li></ul>')}]);
//# sourceMappingURL=../maps/scripts/app-28d457d844.js.map
