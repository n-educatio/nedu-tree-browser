{"version":3,"sources":["scripts/app-8b9e8ad74f.js"],"names":["angular","module","ntbTree","ntbRecursionHelper","directive","scope","folders","ntb","restrict","replace","templateUrl","require","compile","element","$inject","ntbListItems","contents","ntbListItem","item","type","ntbList","NtbListController","displayAs","controller","ntbBrowser","NtbBrowserController","controllerAs","bindToController","$compile","link","isFunction","post","compiledContents","remove","pre","clone","append","apply","arguments","factory","neduTreeBrowser","ntbConfig","$resource","$log","ListSort","ntbFactory","config","this","selectAll","extend","currentFolder","id","parent","elements","items","browseTo","params","endpoints","folder","url","query","isArray","$promise","then","resp","sort","sortByKey","parent_id","debug","isSelectedCheckbox","some","checked","folderTree","getFoldersTree","tree","rawData","length","service","SIMPLE_SORT","USER_FRIENDLY_SORT","STATUS_SORT","TAGS_SORT","ListSortType","sortRules","breadcrumbs","username","name","created_by","modified_by","status","tags","statusesOrder","key","order","sortType","simpleSort","userFriendlySort","statusSort","tagsSort","elementA","elementB","a","b","localeCompare","compare","Intl","Collator","numeric","t","orderA","orderB","join","MainController","$scope","vm","url1","url2","param","selectedEndpoint","changeEndpoints","ntbInstance","displayTypes","selectedDisplayType","changeDisplayType","changeCheckbox","isCheckBoxList","selectedCheckBoxList","addColumn","columns","push","i18n","hasIcon","hasLink","removeColumn","index","splice","selectionAllCallback","console","log","selectionCallback","changeLoCallback","addSelectedCheckbox","select_all","add_los","buttons","class","icon","text","action","runBlock","run","constant","treeBrowseMethod","sortTreeKey","sortListKey","$logProvider","debugEnabled","$templateCache","put"],"mappings":"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","file":"scripts/app-8b9e8ad74f.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('neduTreeBrowser', ['ngResource', 'ui.bootstrap']);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neduTreeBrowser')\n    .directive('ntbTree', ntbTree);\n\n  /** @ngInject */\n  function ntbTree(ntbRecursionHelper) {\n    var directive = {\n      scope: { folders: \"=\", ntb: \"=\" },\n      restrict: 'E',\n      replace: 'true',\n      templateUrl: 'app/components/tree/tree.html',\n      require: \"^ntbBrowser\",\n      compile: function(element) {\n        return ntbRecursionHelper.compile(element);\n      }\n    };\n\n    return directive;\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neduTreeBrowser')\n    .directive('ntbListItemsTable', ntbListItems);\n\n  /** @ngInject */\n  function ntbListItems() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/list-items/list-items-table.html',\n      scope: {\n        contents: \"=\",\n        ntb: \"=\"\n      }\n    };\n\n    return directive;\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neduTreeBrowser')\n    .directive('ntbListItemsList', ntbListItems);\n\n  /** @ngInject */\n  function ntbListItems() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/list-items/list-items-list.html',\n      scope: {\n        contents: \"=\",\n        ntb: \"=\"\n      }\n    };\n\n    return directive;\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neduTreeBrowser')\n    .directive('ntbListItemTable', ntbListItem);\n\n  /** @ngInject */\n  function ntbListItem() {\n    var directive = {\n      restrict: 'A',\n      templateUrl: 'app/components/list-item/list-item-table.html',\n      scope: {\n        item: \"=ntbListItemTable\",\n        type: \"=\",\n        ntb: \"=\"\n      }\n    };\n\n    return directive;\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neduTreeBrowser')\n    .directive('ntbListItemList', ntbListItem);\n\n  /** @ngInject */\n  function ntbListItem() {\n    var directive = {\n      restrict: 'A',\n      templateUrl: 'app/components/list-item/list-item-list.html',\n      scope: {\n        item: \"=ntbListItemList\",\n        type: \"=\",\n        ntb: \"=\"\n      }\n    };\n\n    return directive;\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neduTreeBrowser')\n    .directive('ntbList', ntbList);\n\n  /** @ngInject */\n  function ntbList() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/list/list.html',\n      scope: {\n        contents: \"=\",\n        displayAs: \"=\",\n        ntb: \"=\"\n      },\n      controller: NtbListController\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function NtbListController() {\n\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neduTreeBrowser')\n    .directive('ntbBrowser', ntbBrowser);\n\n  /** @ngInject */\n  function ntbBrowser() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/browser/browser.html',\n      scope: {\n        ntb: \"=\"\n      },\n      controller: NtbBrowserController,\n      controllerAs: 'vm',\n      bindToController: true,\n      replace: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function NtbBrowserController() {\n\n      //var vm = this;\n\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n      .module('neduTreeBrowser')\n      .factory('ntbRecursionHelper', ntbRecursionHelper);\n\n  /** @ngInject */\n  function ntbRecursionHelper($compile) {\n\n    return {\n        /**\n         * Manually compiles the element, fixing the recursion loop.\n         * @param element\n         * @param [link] A post-link function, or an object with function(s) registered via pre and post properties.\n         * @returns An object containing the linking functions.\n         */\n        compile: function(element, link){\n            // Normalize the link parameter\n            if(angular.isFunction(link)){\n                link = { post: link };\n            }\n\n            // Break the recursion loop by removing the contents\n            var contents = element.contents().remove();\n            var compiledContents;\n            return {\n                pre: (link && link.pre) ? link.pre : null,\n                /**\n                 * Compiles and re-adds the contents\n                 */\n                post: function(scope, element){\n                    // Compile the contents\n                    if(!compiledContents){\n                        compiledContents = $compile(contents);\n                    }\n                    // Re-add the compiled contents to the element\n                    compiledContents(scope, function(clone){\n                        element.append(clone);\n                    });\n\n                    // Call the post-linking function, if any\n                    if(link && link.post){\n                        link.post.apply(null, arguments);\n                    }\n                }\n            };\n        }\n    };\n\n  }\n\n})();\n(function() {\n  'use strict';\n\n  angular\n      .module('neduTreeBrowser')\n      .factory('neduTreeBrowser', neduTreeBrowser);\n\n  /** @ngInject */\n  function neduTreeBrowser(ntbConfig, $resource, $log, ListSort) {\n\n    var ntbFactory = function (config) {\n\n      var ntb = this;\n\n      ntb.config = {};\n      ntb.selectAll = false;\n      angular.extend(ntb.config, ntbConfig, config);\n\n\n      /**\n      * folder contents\n      */\n\n      ntb.currentFolder = {\n        id: null,\n        parent: null,\n        elements: {\n          folders: [],\n          items: []\n        }\n      };\n\n      ntb.browseTo = function (id) {\n\n        ntb.currentFolder.id = id;\n        ntb.selectAll = false;\n        var params = {};\n        if (typeof ntb.config.endpoints.folder.params !== \"undefined\") {\n          params = angular.extend(params, ntb.config.endpoints.folder.params);\n        }\n        params = angular.extend(params, {id: id});\n\n        $resource(ntb.config.endpoints.folder.url, params, { query: { isArray: false }})\n        .query()\n        .$promise\n        .then(\n          function (resp) {\n            ntb.currentFolder.elements.folders = resp.folders.sort(ListSort.sortByKey('name', 1));\n            ntb.currentFolder.elements.items = resp.items.sort(ListSort.sortByKey('name', 1));\n            ntb.currentFolder.parent = resp.parent_id;\n          },\n          function (resp) {\n            $log.debug(\"Error loading folder\", resp);\n          }\n        );\n\n      };\n\n      ntb.isSelectedCheckbox = function() {\n        return ntb.currentFolder.elements.items.some(function(item) {\n          return item.checked;\n        });\n      };\n\n      /**\n       * folders tree\n       */\n\n      ntb.folderTree = [];\n\n      var getFoldersTree = function () {\n\n        if (typeof ntb.config.endpoints.tree !== \"undefined\") {\n\n          var params = {};\n          if (typeof ntb.config.endpoints.tree.params !== \"undefined\") {\n            params = angular.extend(params, ntb.config.endpoints.tree.params);\n          }\n\n          $resource(ntb.config.endpoints.tree.url, params)\n            .query()\n            .$promise\n            .then(\n              function (resp) {\n                ntb.folderTree = resp;\n                ntb.browseTo(resp[0].id);\n              },\n              function (resp) {\n                $log.debug(\"Error loading folder tree\", resp);\n              }\n            );\n\n        } else {\n\n          ntb.folderTree = ntb.config.rawData.tree;\n          if (ntb.config.rawData.tree.length && ntb.config.rawData.tree[0].id) {\n            ntb.browseTo(ntb.config.rawData.tree[0].id);\n          }\n\n        }\n      };\n\n      getFoldersTree();\n\n      return ntb;\n\n    };\n\n    return ntbFactory;\n\n  }\n\n})();\n\nangular.module( 'neduTreeBrowser')\n.service('ListSortType', function () {\n  return {\n    SIMPLE_SORT: 0,\n    USER_FRIENDLY_SORT: 1,\n    STATUS_SORT: 2,\n    TAGS_SORT: 3\n  };\n});\n\nangular.module( 'neduTreeBrowser')\n.controller()\n.service( 'ListSort', [\"ListSortType\", function (ListSortType) {\n  return {\n    sortRules: {\n      breadcrumbs: ListSortType.USER_FRIENDLY_SORT,\n      username: ListSortType.USER_FRIENDLY_SORT,\n      name: ListSortType.USER_FRIENDLY_SORT,\n      id: ListSortType.USER_FRIENDLY_SORT,\n      created_by: ListSortType.USER_FRIENDLY_SORT,\n      modified_by: ListSortType.USER_FRIENDLY_SORT,\n      status: ListSortType.STATUS_SORT,\n      tags: ListSortType.TAGS_SORT\n    },\n\n    statusesOrder: {},\n\n    sortByKey: function(key, order) {\n      var sortType = this.sortRules[key] || ListSortType.SIMPLE_SORT;\n\n      if(sortType === ListSortType.SIMPLE_SORT) {\n        return this.simpleSort(key, order);\n      }\n      if(sortType === ListSortType.USER_FRIENDLY_SORT) {\n        return this.userFriendlySort(key, order);\n      }\n      if(sortType === ListSortType.STATUS_SORT) {\n        return this.statusSort(key, order);\n      }\n      if(sortType === ListSortType.TAGS_SORT) {\n        return this.tagsSort(key, order);\n      }\n    },\n\n    simpleSort: function(key, order) {\n      return function(elementA, elementB) {\n        var a = elementA[key];\n        var b = elementB[key];\n        if(!a) {\n          return order;\n        }\n        if(!b) {\n          return -order;\n        }\n        return a.localeCompare(b) * order;\n      };\n    },\n\n    userFriendlySort: function(key, order) {\n      var compare = new Intl.Collator(['en', 'pl'], {\n        numeric: true\n      }).compare;\n\n      return function(elementA, elementB) {\n        return compare(elementA[key], elementB[key]) * order;\n      };\n    },\n\n    statusSort: function(key, order) {\n      var t = this;\n      return function(elementA, elementB) {\n        var a = elementA[key];\n        var b = elementB[key];\n        var orderA = t.statusesOrder[a] || 0;\n        var orderB = t.statusesOrder[b] || 0;\n\n        return (orderA - orderB) * order;\n      };\n    },\n\n    tagsSort: function(key, order) {\n      return function(elementA, elementB) {\n        var a = elementA[key];\n        var b = elementB[key];\n        if(!a || !a.length) {\n          return order;\n        }\n        if(!b || !b.length) {\n          return -order;\n        }\n\n        return a.join(' ').localeCompare(b.join(' ')) * order;\n      };\n    }\n  };\n}]);\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neduTreeBrowser')\n    .controller('MainController', MainController);\n\n  /** @ngInject */\n  function MainController($scope, neduTreeBrowser) {\n    var vm = this;\n\n\n    vm.endpoints = [\n      { id: 1,\n        url1: \"/fixtures/tree.json\",\n        url2: \"/fixtures/:id.json\",\n        params: {}\n      },\n      { id: 2,\n        url1: \"/fixtures/:param/tree.json\",\n        url2: \"/fixtures/:param/:id.json\",\n        params: { param: \"test\" }\n      }\n    ];\n\n    vm.selectedEndpoint = vm.endpoints[0];\n\n    vm.changeEndpoints = function () {\n\n      vm.ntbConfig.endpoints = {\n        tree: {\n          url: vm.selectedEndpoint.url1,\n          params: vm.selectedEndpoint.params\n        },\n        folder: {\n          url: vm.selectedEndpoint.url2,\n          params: vm.selectedEndpoint.params\n        }\n      };\n\n      vm.ntbInstance = new neduTreeBrowser(vm.ntbConfig);\n    };\n\n    vm.displayTypes = [\n      { id: 1,\n        name: \"list\"\n      },\n      { id: 2,\n        name: \"table\"\n      }\n    ];\n\n    vm.selectedDisplayType = vm.displayTypes[0];\n\n    vm.changeDisplayType = function () {\n      vm.ntbConfig.displayAs = vm.selectedDisplayType.name;\n\n      vm.ntbInstance = new neduTreeBrowser(vm.ntbConfig);\n    };\n\n    vm.changeCheckbox = function () {\n      vm.ntbConfig.isCheckBoxList = vm.selectedCheckBoxList;\n\n      vm.ntbInstance = new neduTreeBrowser(vm.ntbConfig);\n    };\n\n    vm.addColumn = function () {\n      vm.ntbConfig.columns.push({ key: \"\", i18n: \"\", hasIcon: false, hasLink: false});\n    };\n\n    vm.removeColumn = function (index) {\n      vm.ntbConfig.columns.splice(index, 1);\n    };\n\n    vm.ntbConfig = {\n      endpoints: {\n        tree: {\n          url: \"/fixtures/tree.json\",\n          params: {}\n        },\n        folder: {\n          url: \"/fixtures/:id.json\",\n          params: {}\n        }\n      },\n      displayAs: \"list\",\n      isCheckBoxList: false,\n      columns: [\n        { key: \"id\", i18n: \"Id\" },\n        { key: \"name\", i18n: \"Name\", hasIcon: true, hasLink: true }\n      ],\n      selectionAllCallback: function () {\n        console.log(\"Items have been selected\");\n      },\n      selectionCallback: function (item) {\n        console.log(item.id, item.name, \"has been selected\");\n      },\n      changeLoCallback: function (item) {\n        console.log(item.id, item.name, \"has been changed\");\n      },\n      addSelectedCheckbox: function () {\n        console.log(\"Items have been added\");\n      },\n      i18n: {\n        \"select_all\": \"Select all\",\n        \"add_los\": \"Add learning objects\"\n      },\n      buttons: [\n        {\n          class: \"btn btn-primary btn-xs\",\n          icon: \"glyphicon glyphicon-pencil\",\n          text: \"Edit\",\n          action: function () { console.log(\"Edit clicked!\"); }\n        },\n        {\n          class: \"btn btn-primary btn-xs\",\n          icon: \"glyphicon glyphicon-eye-open\",\n          text: null,\n          action: function () { console.log(\"Preview clicked!\"); }\n        }\n      ]\n    };\n\n\n    vm.ntbInstance = new neduTreeBrowser(vm.ntbConfig);\n\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neduTreeBrowser')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock() {\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neduTreeBrowser')\n    .constant('ntbConfig', {\n      endpoints: {\n        tree: {\n          url: null,\n          params: {}\n        },\n        folder: {\n          url: null,\n          params: {}\n        }\n      },\n      treeBrowseMethod: \"click\",  //[\"click\", \"ui.router\"],\n      displayAs: \"table\",         //[\"table\", \"list\"]\n      sortTreeKey: 'name',\n      sortListKey: 'name',\n      isCheckBoxList: false,\n      columns: [\n        { key: \"id\", i18n: \"Id\" },\n        { key: \"name\", i18n: \"Name\", hasIcon: true, hasLink: true }\n      ],\n      i18n: {\n        \"select_all\" : \"\",\n        \"add_los\": \"\"\n      },\n      selectionAllCallback: function () {},\n      selectionCallback: function() {},\n      changeLoCallback: function() {},\n      addSelectedCheckbox: function() {}\n    });\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neduTreeBrowser')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n\n  }\n\n})();\n\nangular.module(\"neduTreeBrowser\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/components/browser/browser.html\",\"<div class=\\\"ntb-browser\\\"><div class=\\\"ntb-folders-wrapper\\\"><ntb-tree folders=\\\"vm.ntb.folderTree\\\" ntb=\\\"vm.ntb\\\"></ntb-tree></div><div class=\\\"ntb-list-wrapper\\\"><ntb-list contents=\\\"vm.ntb.currentFolder\\\" display-as=\\\"vm.ntb.config.displayAs\\\" ntb=\\\"vm.ntb\\\"></ntb-list></div></div>\");\n$templateCache.put(\"app/components/list/list.html\",\"<div class=\\\"ntb-list\\\"><ntb-list-items-table ng-if=\\\"displayAs === \\'table\\'\\\" contents=\\\"contents\\\" ntb=\\\"ntb\\\"></ntb-list-items-table><ntb-list-items-list ng-if=\\\"displayAs === \\'list\\'\\\" contents=\\\"contents\\\" ntb=\\\"ntb\\\"></ntb-list-items-list></div>\");\n$templateCache.put(\"app/components/list-item/list-item-list.html\",\"<span ng-if=\\\"type === \\'item\\' && ntb.config.isCheckBoxList\\\"><input type=\\\"checkbox\\\" ng-change=\\\"ntb.config.changeLoCallback(item)\\\" ng-model=\\\"item.checked\\\" id=\\\"{{ item.id }}\\\" class=\\\"list-group-checkbox\\\"></span> <span ng-repeat=\\\"column in ntb.config.columns\\\"><i class=\\\"glyphicon glyphicon-folder-close\\\" ng-if=\\\"column.hasIcon && type === \\'folder\\'\\\"></i> <i class=\\\"glyphicon glyphicon-file\\\" ng-if=\\\"column.hasIcon && type === \\'item\\'\\\"></i> {{ item[column.key] }}</span> <span ng-if=\\\"ntb.config.buttons && ntb.config.buttons.length && type === \\'item\\'\\\" class=\\\"pull-right\\\"><button ng-repeat=\\\"button in ntb.config.buttons\\\" class=\\\"{{ button.class }}\\\" ng-click=\\\"button.action($event, item)\\\"><i ng-if=\\\"button.icon\\\" class=\\\"{{ button.icon }}\\\"></i> {{ button.text ? button.text : \\'\\'}}</button></span>\");\n$templateCache.put(\"app/components/list-item/list-item-table.html\",\"<td ng-repeat=\\\"column in ntb.config.columns\\\"><a ng-if=\\\"type === \\'folder\\' && column.hasLink && ntb.config.treeBrowseMethod === \\'ui.router\\'\\\" ui-sref=\\\".folder({folder: item.id})\\\"><i class=\\\"glyphicon glyphicon-folder-open\\\" ng-if=\\\"column.hasIcon\\\"></i> {{ item[column.key] }}</a> <a ng-if=\\\"type === \\'folder\\' && column.hasLink && ntb.config.treeBrowseMethod === \\'click\\'\\\" ng-click=\\\"ntb.browseTo(item.id)\\\"><i class=\\\"glyphicon glyphicon-folder-open\\\" ng-if=\\\"column.hasIcon\\\"></i> {{ item[column.key] }}</a> <a ng-if=\\\"type === \\'item\\' && column.hasLink\\\" ng-click=\\\"ntb.config.selectionCallback(item)\\\"><i class=\\\"glyphicon glyphicon-file\\\" ng-if=\\\"column.hasIcon\\\"></i> {{ item[column.key] }}</a> <span ng-if=\\\"type === \\'folder\\' && !column.hasLink\\\"><i class=\\\"glyphicon glyphicon-folder-open\\\" ng-if=\\\"column.hasIcon\\\"></i> {{ item[column.key] }}</span> <span ng-if=\\\"type === \\'item\\' && !column.hasLink\\\"><i class=\\\"glyphicon glyphicon-file\\\" ng-if=\\\"column.hasIcon\\\"></i> {{ item[column.key] }}</span></td><td ng-if=\\\"ntb.config.buttons && ntb.config.buttons.length\\\"><button ng-if=\\\"type === \\'item\\'\\\" ng-repeat=\\\"button in ntb.config.buttons\\\" class=\\\"{{ button.class }}\\\" ng-click=\\\"button.action($event, item)\\\"><i ng-if=\\\"button.icon\\\" class=\\\"{{ button.icon }}\\\"></i> {{ button.text ? button.text : \\'\\' }}</button></td>\");\n$templateCache.put(\"app/components/list-items/list-items-list.html\",\"<div class=\\\"list-group-select-all\\\"><span ng-if=\\\"ntb.config.isCheckBoxList && contents.elements.items.length !== 0\\\"><input type=\\\"checkbox\\\" ng-model=\\\"ntb.selectAll\\\" class=\\\"select-all-checkbox\\\" ng-click=\\\"ntb.config.selectionAllCallback()\\\"> {{ ntb.config.i18n.select_all }}</span> <button ng-if=\\\"ntb.config.isCheckBoxList && contents.elements.items.length !== 0 && ntb.isSelectedCheckbox()\\\" class=\\\"add-selected-checkbox btn-primary pull-right\\\" ng-click=\\\"ntb.config.addSelectedCheckbox()\\\">{{ ntb.config.i18n.add_los }}</button></div><div class=\\\"list-group\\\"><a class=\\\"list-group-item\\\" ng-if=\\\"contents.parent && ntb.config.treeBrowseMethod === \\'ui.router\\'\\\" ui-sref=\\\".folder({folder: contents.parent})\\\">..</a> <a class=\\\"list-group-item\\\" ng-if=\\\"contents.parent && ntb.config.treeBrowseMethod === \\'click\\'\\\" ng-click=\\\"ntb.browseTo(contents.parent)\\\">..</a> <a ng-repeat=\\\"item in contents.elements.folders | orderBy: ntb.config.sortListKey\\\" ntb-list-item-list=\\\"item\\\" type=\\\"\\'folder\\'\\\" ntb=\\\"ntb\\\" class=\\\"list-group-item\\\" ng-if=\\\"ntb.config.treeBrowseMethod === \\'ui.router\\'\\\" ui-sref=\\\".folder({folder: item.id})\\\"></a> <a ng-repeat=\\\"item in contents.elements.folders | orderBy: ntb.config.sortListKey\\\" ntb-list-item-list=\\\"item\\\" type=\\\"\\'folder\\'\\\" ntb=\\\"ntb\\\" class=\\\"list-group-item\\\" ng-if=\\\"ntb.config.treeBrowseMethod === \\'click\\'\\\" ng-click=\\\"ntb.browseTo(item.id)\\\"></a> <a ng-repeat=\\\"item in contents.elements.items | orderBy: ntb.config.sortListKey\\\" ntb-list-item-list=\\\"item\\\" type=\\\"\\'item\\'\\\" ntb=\\\"ntb\\\" class=\\\"list-group-item\\\" ng-click=\\\"ntb.config.selectionCallback(item)\\\"></a></div>\");\n$templateCache.put(\"app/components/list-items/list-items-table.html\",\"<table class=\\\"table\\\"><thead><tr><th ng-repeat=\\\"column in ntb.config.columns\\\">{{ column.i18n }}</th><th ng-if=\\\"ntb.config.buttons && ntb.config.buttons.length\\\"></th></tr></thead><tbody><tr ng-if=\\\"contents.parent\\\"><td colspan=\\\"{{ ntb.config.columns.length }}\\\"><a ng-if=\\\"ntb.config.treeBrowseMethod === \\'ui.router\\'\\\" ui-sref=\\\".folder({folder: contents.parent})\\\">..</a> <a ng-if=\\\"ntb.config.treeBrowseMethod === \\'click\\'\\\" ng-click=\\\"ntb.browseTo(contents.parent)\\\">..</a></td><td ng-if=\\\"ntb.config.buttons && ntb.config.buttons.length\\\"></td></tr><tr ng-repeat=\\\"item in contents.elements.folders | orderBy: \\'name\\'\\\" ntb-list-item-table=\\\"item\\\" type=\\\"\\'folder\\'\\\" ntb=\\\"ntb\\\"></tr><tr ng-repeat=\\\"item in contents.elements.items | orderBy: \\'name\\'\\\" ntb-list-item-table=\\\"item\\\" type=\\\"\\'item\\'\\\" ntb=\\\"ntb\\\"></tr></tbody></table>\");\n$templateCache.put(\"app/components/tree/tree.html\",\"<ul class=\\\"ntb-folder-list\\\"><li ng-repeat=\\\"folder in folders | orderBy: ntb.config.sortTreeKey\\\"><a ng-if=\\\"ntb.config.treeBrowseMethod === \\'ui.router\\'\\\" ui-sref=\\\".folder({folder: folder.id})\\\" ui-sref-active=\\\"active\\\"><i class=\\\"glyphicon glyphicon-folder-open\\\"></i> {{ folder.name }}</a> <a ng-if=\\\"ntb.config.treeBrowseMethod === \\'click\\'\\\" ng-click=\\\"ntb.browseTo(folder.id)\\\"><i class=\\\"glyphicon glyphicon-folder-open\\\"></i> {{ folder.name }}</a><ntb-tree ng-if=\\\"folder.folders.length\\\" folders=\\\"folder.folders\\\" ntb=\\\"ntb\\\"></ntb-tree></li></ul>\");}]);"],"sourceRoot":"/source/"}